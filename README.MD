<h1 align="center">
	<p><img width=25% src="./Resources/Logo.jpg"></p>
API trung t√¢m tin h·ªçc Sao Vi·ªát
</h1>

<p align="center">D·ª± √°n x√¢y d·ª±ng API m√£ ngu·ªìn m·ªü tr√™n n·ªÅn t·∫£ng .NET Core 7, s·ª≠ d·ª•ng <b>Clean architecture</b> v√† <b>Repository pattern</b></p>

<p align="center">
	<img src="https://img.shields.io/badge/.NET%20Core-7.0-%238338ec?style=for-the-badge&logo=appveyor">
	<img src="https://img.shields.io/badge/dependencies-up%20to%20date-brightgreen.svg?style=for-the-badge&logo=appveyor">
	<img src="https://img.shields.io/badge/swagger-valid-green?style=for-the-badge&logo=appveyor">
	<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/license-MIT-blue.svg?style=for-the-badge&logo=appveyor"></a>
</p>

# M·ª•c l·ª•c

- [M·ª•c l·ª•c](#m·ª•c-l·ª•c)
- [T·ªïng quan](#t·ªïng-quan)
  - [Gi·ªõi thi·ªáu](#gi·ªõi-thi·ªáu)
  - [Chi ti·∫øt](#chi-ti·∫øt)
  - [Ki·∫øn tr√∫c](#ki·∫øn-tr√∫c)
  - [Repository pattern](#repository-pattern)
  - [M√¥i tr∆∞·ªùng ph√°t tri·ªÉn](#m√¥i-tr∆∞·ªùng-ph√°t-tri·ªÉn)
- [C√†i ƒë·∫∑t](#c√†i-ƒë·∫∑t)
  - [C√†i ƒë·∫∑t m√¥i tr∆∞·ªùng ph√°t tri·ªÉn](#c√†i-ƒë·∫∑t-m√¥i-tr∆∞·ªùng-ph√°t-tri·ªÉn)
  - [C√†i ƒë·∫∑t Log v√† Monitor](#c√†i-ƒë·∫∑t-log-v√†-monitor)
  - [C·∫•u h√¨nh k·∫øt n·ªëi v·ªõi SQL Server](#c·∫•u-h√¨nh-k·∫øt-n·ªëi-v·ªõi-sql-server)
- [T√†i li·ªáu](#t√†i-li·ªáu)
- [Ng∆∞·ªùi ƒë√≥ng g√≥p](#ng∆∞·ªùi-ƒë√≥ng-g√≥p)
- [Li√™n h·ªá](#li√™n-h·ªá)
- [Gi·∫•y ph√©p](#gi·∫•y-ph√©p)

# T·ªïng quan

## Gi·ªõi thi·ªáu

Sao Vi·ªát API l√† m·ªôt c√¥ng c·ª• t·∫°o d·ªØ li·ªáu t·ª± ƒë·ªông cho c√°c ·ª©ng d·ª•ng ph·∫ßn m·ªÅm. N√≥ cung c·∫•p d·ªØ li·ªáu v·ªÅ gi√°o vi√™n, l·ªõp h·ªçc, h·ªçc sinh... S·ª≠ d·ª•ng Sao Vi·ªát API gi√∫p cho vi·ªác l·∫•y d·ªØ li·ªáu tr·ªü n√™n d·ªÖ d√†ng v√† nhanh ch√≥ng.

## Chi ti·∫øt

C√°c th√†nh ph·∫ßn ch√≠nh c·ªßa API bao g·ªìm:

- **Qu·∫£n l√Ω d·ªØ li·ªáu:** L√† m·ªôt d·ª± √°n .NET Core 7, s·ª≠ d·ª•ng Entity Framework Core ƒë·ªÉ qu·∫£n l√Ω d·ªØ li·ªáu. D·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ trong c∆° s·ªü d·ªØ li·ªáu SQL Server.
- **Loggging:** S·ª≠ d·ª•ng tr√¨nh qu·∫£n l√Ω ghi nh·∫≠t k√Ω Elastic Stack ƒë·ªÉ qu·∫£n l√Ω nh·∫≠t k√Ω.
- **Gi√°m s√°t:** S·ª≠ d·ª•ng tr√¨nh qu·∫£n l√Ω gi√°m s√°t Prometheus v√† Grafana ƒë·ªÉ gi√°m s√°t t√¨nh tr·∫°ng c·ªßa API.
- **Cache:** S·ª≠ d·ª•ng memory cached ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu cache.
- **Giao di·ªán ng∆∞·ªùi d√πng:** S·ª≠ d·ª•ng Swagger ƒë·ªÉ tri·ªÉn khai giao di·ªán ng∆∞·ªùi d√πng.

## Ki·∫øn tr√∫c

API ƒë∆∞·ª£c thi·∫øt k·∫ø theo ki·∫øn tr√∫c Clean architecture. C√°c th√†nh ph·∫ßn ch√≠nh c·ªßa ki·∫øn tr√∫c bao g·ªìm:

<p align="center"><img width=75% src="./Resources/CleanArchitecture.png"></p>

- **Domain:** L√† c√°c ƒë·ªëi t∆∞·ª£ng th·ªÉ hi·ªán c√°c b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu.
- **Application:** L√† c√°c l·ªõp x·ª≠ l√Ω nghi·ªáp v·ª• c·ªßa API.
- **Infrastructure:** L√† c√°c l·ªõp cung c·∫•p c√°c d·ªãch v·ª• nh∆∞ c∆° s·ªü d·ªØ li·ªáu, giao di·ªán ng∆∞·ªùi d√πng, nh·∫≠t k√Ω, gi√°m s√°t, cache...
- **WebApi:** L√† c√°c l·ªõp cung c·∫•p c√°c API cho ng∆∞·ªùi d√πng.

## Repository pattern

API s·ª≠ d·ª•ng m√¥ h√¨nh Repository pattern ƒë·ªÉ truy xu·∫•t d·ªØ li·ªáu. M√¥ h√¨nh n√†y bao g·ªìm c√°c th√†nh ph·∫ßn sau:

<p align="center"><img width=75% src="./Resources/RepositoryPattern.png"></p>

- **Interface:** L√† m·ªôt interface ch·ª©a c√°c ph∆∞∆°ng th·ª©c truy xu·∫•t d·ªØ li·ªáu.
- **Repository:** L√† m·ªôt l·ªõp th·ª±c thi interface.
- **Service:** L√† m·ªôt l·ªõp ch·ª©a c√°c ph∆∞∆°ng th·ª©c x·ª≠ l√Ω nghi·ªáp v·ª•.

## M√¥i tr∆∞·ªùng ph√°t tri·ªÉn

ƒê·ªÉ ph√°t tri·ªÉn API, b·∫°n c·∫ßn c√†i ƒë·∫∑t c√°c th√†nh ph·∫ßn sau:

- .NET Core 7
- SQL Server 2022
- ELK Stack
- Prometheus
- Grafana

# C√†i ƒë·∫∑t

## C√†i ƒë·∫∑t m√¥i tr∆∞·ªùng ph√°t tri·ªÉn

ƒê·ªÉ c√†i ƒë·∫∑t m√¥i tr∆∞·ªùng cho vi·ªác ph√°t tri·ªÉn API, b·∫°n c·∫ßn c√†i ƒë·∫∑t c√°c th√†nh ph·∫ßn sau:

- [.NET Core 7](https://dotnet.microsoft.com/download/dotnet-core/7.0)
- [SQL Server](https://www.microsoft.com/en-us/sql-server/sql-server-downloads)
- [Docker](https://www.docker.com/products/docker-desktop)

> üê≥ Ngo√†i ra c√≥ th·ªÉ tri·ªÉn khai m√¥i tr∆∞·ªùng m·ªôt c√°ch nhanh ch√≥ng b·∫±ng c√°ch s·ª≠ d·ª•ng [Docker](https://docs.docker.com/).
>
> ƒê·∫ßu ti√™n, b·∫°n c·∫ßn pull image .NET 7 t·ª´ Docker Hub:
>
> ```bash
> docker pull mcr.microsoft.com/dotnet/core/sdk:7.0
> ```
>
> Kh·ªüi ƒë·ªông container .NET 7:
>
> ```bash
> docker run -it --name dotnet7_container -p 8080:80 microsoft/dotnet:7.0-runtime
> ```
>
> C√†i ƒë·∫∑t SQL Server:
>
> ```bash
> docker pull mcr.microsoft.com/mssql/server
> ```
>
> Kh·ªüi ƒë·ªông container SQL Server:
>
> ```bash
> docker run -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=yourStrong(!)Password' -p 1433:1433 -d mcr.microsoft.com/mssql/server
> ```
>
> Ngo√†i ra, b·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng [Docker Compose](https://docs.docker.com/compose/) ƒë·ªÉ kh·ªüi ƒë·ªông m√¥i tr∆∞·ªùng ph√°t tri·ªÉn.

Cu·ªëi c√πng, b·∫°n c·∫ßn kh·ªüi ƒë·ªông API b·∫±ng c√°ch ch·∫°y l·ªánh sau:

```bash
dotnet run
```

> üìù L∆∞u √Ω: N·∫øu b·∫°n s·ª≠ d·ª•ng Docker, b·∫°n c·∫ßn ch·∫°y l·ªánh sau ƒë·ªÉ kh·ªüi ƒë·ªông API:
>
> ```bash
> docker run -it --name dotnet7_container -p 8080:80 -v /path/to/project:/app microsoft/dotnet:7.0-runtime
> ```

## C√†i ƒë·∫∑t Log v√† Monitor

Sau ƒë√≥, b·∫°n c·∫ßn thi·∫øt l·∫≠p c√°c th√†nh ph·∫ßn nh∆∞ Elastic Stack, Prometheus v√† Grafana. ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, b·∫°n c·∫ßn ch·∫°y l·ªánh sau:

```bash
docker-compose up -d
```

ƒê·ªÉ s·ª≠ d·ª•ng ƒë∆∞·ª£c c√°c th√†nh ph·∫ßn n√†y, vui l√≤ng tham kh·∫£o t·∫°o trang [Wiki](https://github.com/foxminchan/SaoVietAPI/wiki).

## C·∫•u h√¨nh k·∫øt n·ªëi v·ªõi SQL Server

Sau khi kh·ªüi ƒë·ªông API, b·∫°n c√≥ th·ªÉ truy c·∫≠p v√†o giao di·ªán ng∆∞·ªùi d√πng c·ªßa API t·∫°i ƒë·ªãa ch·ªâ `http://localhost:(port)/swagger`. V·ªõi port ƒë∆∞·ª£c thi·∫øt l·∫≠p trong file `appsettings.json`.

Sau ƒë√≥ ti·∫øn h√†nh c·∫•u h√¨nh k·∫øt n·ªëi v·ªõi SQL Server.

ƒê·∫ßu ti√™n thay ƒë·ªïi chu·ªói k·∫øt n·ªëi trong file [`appsettings.json`](./WebAPI/WebAPI/appsettings.json)

```json
"ConnectionStrings": {
    "DefaultConnection": "Data Source=your_server;Initial Catalog=your_database;User ID=your_username;Password=your_password; Integrated Security=True; TrustServerCertificate=True"
}
```

Xo√° c√°c Migration c≈©:

```bash
dotnet ef migrations remove
```

T·∫°o Migration m·ªõi:

```bash
dotnet ef migrations add InitialCreate
```

`L∆∞u √Ω:` C∆° s·ªü d·ªØ li·ªáu c·∫ßn ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc khi ch·∫°y l·ªánh n√†y.

Cu·ªëi c√πng, c·∫≠p nh·∫≠t c∆° s·ªü d·ªØ li·ªáu:

```bash
dotnet ef database update
```

# T√†i li·ªáu

- Xem C√°c thay ƒë·ªïi t·∫°i trang [Changelog](./CHANGELOG.md)
- Xem t√†i li·ªáu v·ªÅ c√°ch s·ª≠ d·ª•ng API t·∫°i trang [API Documentation](#)
- Xem quy t·∫Øc ·ª©ng x·ª≠ t·∫°i trang [Contributor Covenant Code of Conduct](./CODE_OF_CONDUCT.md)
- Xem ƒë√≥ng g√≥p t·∫°i trang [Contributing](./CONTRIBUTING.md)
- Xem ch√≠nh s√°ch b·∫£o m·∫≠t t·∫°i trang [Privacy Policy](./SECURITY.md)

# Ng∆∞·ªùi ƒë√≥ng g√≥p

Sao Vi·ªát API l√† m·ªôt d·ª± √°n m√£ ngu·ªìn m·ªü v√† ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi c√°c ƒë√≥ng g√≥p c·ªßa c√°c th√†nh vi√™n sau:

<table align="center">
  <tbody>
	<tr>
		<td align="center"><a href="https://github.com/foxminchan"><img src="https://avatars.githubusercontent.com/u/56079798?v=4?s=100" width="100px;" alt="Nguy·ªÖn Xu√¢n Nh√¢n"/><br /><sub><b>Nguy·ªÖn Xu√¢n Nh√¢n</b></sub></a><br /><a href="https://github.com/foxminchan/SaoVietAPI/commits?author=foxminchan" title="Code">üíª</a></td>
		<td align="center"><a href="https://github.com/lycaphe8x"><img src="https://avatars.githubusercontent.com/u/3860060?v=4?s=100" width="100px;" alt="Nguy·ªÖn Xu√¢n Nh√¢n"/><br /><sub><b>Nguy·ªÖn ƒê√¨nh √Ånh</b></sub></a><br /><a href="#" title="Guide">üìù</a></td>
	</tr>
  </tbody>
</table>

# Li√™n h·ªá

N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o, vui l√≤ng li√™n h·ªá v·ªõi t√¥i qua c√°c k√™nh sau:

- [Facebook](https://www.facebook.com/foxminchan)
- [Email](mailto:nguyenxuannhan407@gmail.com)

# Gi·∫•y ph√©p

Sao Vi·ªát API ƒë∆∞·ª£c ph√°t h√†nh theo gi·∫•y ph√©p [MIT](./LICENSE).

@Copyright (C) 2023 4FT. All rights reserved
